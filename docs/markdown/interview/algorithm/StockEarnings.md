# 股票最大收益

## 题目描述

给定一个数组 prices ，它的第 i 个元素 prices[i] 表示一支给定股票第 i 天的价格。

`你只能选择 某一天 买入这只股票，并选择在 未来的某一个不同的日子 卖出该股票。设计一个算法来计算你所能获取的最大利润。`

返回你可以从这笔交易中获取的最大利润。如果你不能获取任何利润，返回 0 。

示例 1：

```
输入：[7,1,5,3,6,4]
输出：5
```

解释：在第 2 天（股票价格 = 1）的时候买入，在第 5 天（股票价格 = 6）的时候卖出，最大利润 = 6-1 = 5 。
注意利润不能是 7-1 = 6, 因为卖出价格需要`大于`买入价格；同时，你不能在买入前卖出股票。

示例 2：

```
输入：prices = [7,6,4,3,1]
输出：0
```

解释：在这种情况下, 没有交易完成, 所以最大利润为 0。

## 解题

当前思路是只需要一次遍历：

::: tip 思路

1. 初始化变量 minPrice 为1000000，表示当前遇到的最低买入价格；

2. 初始化变量 maxProfit 为 0，表示当前获得的最大利润；

3. 遍历 prices 数组，对于每一天的价格：

    - 如果当前价格比 minPrice 低，就更新 minPrice；

    - 否则计算用当前价格卖出与 minPrice 的差值（即利润），更新 maxProfit 为两者中的较大值；

4. 遍历结束后，maxProfit 即为最大利润。
:::
下面是具体代码：

```js
function maxProfit(prices) {
    let minPrice = 1000000;  // 当前最低的买入价格
    let maxProfit = 0;        // 当前获得的最大利润

    for (let price of prices) {
        // 如果当前价格更低，更新最低价格
        if (price < minPrice) {
            minPrice = price;
        } else {
            // 否则计算当前卖出能获得的利润，并更新最大利润
            maxProfit = Math.max(maxProfit, price - minPrice);
        }
    }
    
    return maxProfit;
}
```

测试一下

```js
console.log(maxProfit([7,1,5,3,6,4]));  // 输出: 5
console.log(maxProfit([7,6,4,3,1]));      // 输出: 0
```

## 代码解释

- 变量初始化：
  - `minPrice` 初始设置为 无穷大，确保第一个价格会更新 `minPrice`。
  - `maxProfit` 初始设置为 0。

- 遍历数组：
  - 当遇到比当前 `minPrice` 更低的价格时，说明此时买入可以获得更低的成本，因此更新 `minPrice`；
  - 当当前价格高于 `minPrice` 时，计算卖出获得的利润 `price - minPrice`，并比较是否更新 `maxProfit`。
- 返回结果：
  - 遍历完成后，`maxProfit` 即为能获得的最大利润，如果无法获利（例如价格一直在下降），则返回 0。

## 复杂度分析

- 时间复杂度：`O(n)`，只需要遍历一次数组。
- 空间复杂度：`O(1)`，只使用了常数个额外变量。
这种方法简单且高效，可以解决题目要求的求解股票最大利润问题。
